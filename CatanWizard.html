<!DOCTYPE HTML>
<html>
<head>
    <!-- <link rel="stylesheet" type="text/css" href="main.css"/> -->
</head>

<body>
    <h1>Generated Board Layout<br></h1>
    <p id="board"></p>

    <hr>
    <form>

        <form id="radios">Number of Players:
            <input type="radio" name="numPlayers" id="p2" onclick="adjustPlayers();" value="2" checked>2
            <input type="radio" name="numPlayers" id="p3"onclick="adjustPlayers();" value="3">3
            <input type="radio" name="numPlayers" id="p4"onclick="adjustPlayers();" value="4">4  
        </form> 
        
        <p id="paragraph1">
            Player 1:
            <input type="text" name="player1">
        </p>
        <p id="paragraph2">
            Player 2:
            <input type="text" name="player2">
        <p id="paragraph3">
            Player 3:
            <input type="text" name="player3">
        </p>
        <p id="paragraph4">
            Player 4:
            <input type="text" name="player4">
        </p>

        <button onclick="decideFirstPlayer();">Pick 1st Player</button>
    </form>

    <h1 id="firstPlayer"></h1>

    <script>
    let wood = {resource:"Wood", count:4}
    let sheep = {resource:"Sheep", count:4}
    let wheat = {resource:"Wheat", count:4}
    let stone = {resource:"Stone", count:3}
    let brick = {resource:"Brick", count:3}
    let randHex = {resource:"null", count:null}
    let hexes = [wood, sheep, wheat, stone, brick]
    let rand
    let text = ""

    document.getElementById("paragraph3").style.display="none";
    document.getElementById("paragraph4").style.display="none";
    // document.getElementById("firstPlayer").style.display="none";

    while (!checkResourcesDone(hexes)) {
        //return a random # 0-4
        rand = Math.floor(Math.random() * 5)
        randHex = hexes[rand]

        if (randHex.count > 0){
            text += (randHex.resource + ', ')
            randHex.count--
        }
        document.getElementById('board').innerHTML = text.slice(0, text.length-2)
    }

    //function returns 'done' status for any remaining resources to assign to the board
    function checkResourcesDone(hexes){
        let done = true
        hexes.forEach(function(element) {      
            if (element.count > 0){
                done = false
            }
        }, this);

        //done = true : all resource counts equal 0
        //done = false : at least 1 resource count > 0
        return done
    }

    function adjustPlayers(){
        let selectedPlayers = document.querySelector('input[name = "numPlayers"]:checked').value
        if (selectedPlayers==2){
            document.getElementById("paragraph3").style.display="none";
            document.getElementById("paragraph4").style.display="none";
        }
        else if (selectedPlayers==3){
            document.getElementById("paragraph3").style.display="block"
            document.getElementById("paragraph4").style.display="none";
        }
        else if (selectedPlayers==4){
            document.getElementById("paragraph3").style.display="block"
            document.getElementById("paragraph4").style.display="block"
        }
    }

    function decideFirstPlayer(){
        let empty = true
        let numPlayers = parseInt(document.querySelector('input[name = "numPlayers"]:checked').value)
        // for (let i=1;i<4;i++){
        //     if (document.querySelector("'input[name = '\"" + 'player' + numPlayers + '"]\'').value == empty){ //doesn't work
        //         console.log("empty")
        //         empty = true
        //     }
        // }
        //try to get the value using document.getelementbynames="player1" instead of using query selector
        
        //return a random # 1-4
        let theFirstPlayer = Math.floor(Math.random() * numPlayers) + 1
        let text = "Congratulations! The first player is: " 
        switch (theFirstPlayer){
            case 1:
                text += document.querySelector('input[name = "player1"]').value
                break
            case 2:
                text += document.querySelector('input[name = "player2"]').value
                break
            case 3:
                text += document.querySelector('input[name = "player3"]').value
                break
            case 4:
                text += document.querySelector('input[name = "player4"]').value
                break
        }

        document.getElementById("firstPlayer").innerHTML = text;
        document.getElementById("firstPlayer").style.display="block";
    }

    </script>
</body>
</html>